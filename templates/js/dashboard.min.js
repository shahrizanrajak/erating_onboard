$(document).ready(function(){var b=($("#base_url").val(),$("#domain").val());setInterval(function(){$.ajax({type:"GET",datatype:"jsonp",url:b+"index.php/api/dashboard_total_rating",success:function(a){$("#txtTotalRating").text(a),console.log("getData: "+a)}}),$.ajax({type:"GET",datatype:"jsonp",url:b+"index.php/api/dashboard_total_comment",success:function(a){$("#txtTotalComment").text(a)}})},1e4),$("#click-stats-monthly").click(function(){$("#stats-monthly").show(),$("#stats-weekly").hide()}),$("#click-stats-weekly").click(function(){$("#stats-weekly").show(),$("#stats-monthly").hide()}),$.ajax({url:b+"index.php/api/report-by-rated-category",success:function(a){var b=JSON.parse(a);b.map(function(a){var b=[{value:a.rate_5,color:"#00c0ef",highlight:"#00c0ef",label:"Cemerlang"},{value:a.rate_4,color:"#00a65a",highlight:"#00a65a",label:"Memuaskan"},{value:a.rate_3,color:"#d2d6de",highlight:"#d2d6de",label:"Sederhana Memuaskan"},{value:a.rate_2,color:"#f39c12",highlight:"#f39c12",label:"Kurang Memuaskan"},{value:a.rate_1,color:"#f56954",highlight:"#f56954",label:"Tidak Memuaskan"}],c=$("#pieChart").get(0).getContext("2d"),d=new Chart(c),e=b,f={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:1,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,responsive:!0,maintainAspectRatio:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>',tooltipTemplate:"<%=value %> <%=label%>"};d.Doughnut(e,f)})}}),$.ajax({url:b+"index.php/api/report-rated-monthly",success:function(a){var b=JSON.parse(a),c=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],d=new Array,e=new Array;b.map(function(a){d.push(c[a.month-1]),e.push(c[a.month-1])});Morris.Bar({element:"stats-monthly",data:b,xkey:"month",ykeys:["total"],labels:["Rating"],xLabelFormat:function(){return d.shift()}}),Morris.Line({element:"stats-weekly",data:b,xkey:"month",ykeys:["rate_5","rate_4","rate_3","rate_2","rate_1"],labels:["Cemerlang","Memuaskan","Sederhana","Kurang","Tidak"],xLabelFormat:function(){return e.shift()}})}})});