!function(t,i,e,n){"use strict";var o,s="emotionsRating",a={bgEmotion:"happy",emotionsCollection:["angry","disappointed","meh","happy","inlove"],count:5,color:"#d0a658;",emotionSize:30,inputName:"ratings[]",emotionOnUpdate:null,ratingCode:5,disabled:!1},d={angry:"&#x1F620;",disappointed:"&#x1F61E;",meh:"&#x1F610;",happy:"&#x1F60A;",smile:"&#x1F603;",wink:"&#x1F609;",laughing:"&#x1F606;",inlove:"&#x1F60D;",heart:"&#x2764;",crying:"&#x1F622;",star:"&#x2B50;",poop:"&#x1F4A9;",cat:"&#x1F63A;",like:"&#x1F44D;",dislike:"&#x1F44E;"};function h(i,e){this.element=i,this.settings=t.extend({},a,e),this.$el=t(i),this.$el.data(name,this),this._defaults=a,this._name=s;var n=this.$el.data(name+"-opts");this.opts=t.extend(this._defaults,e,n),this.containerCode=this.$el.attr("id"),this.elementContainer=t(i),this.styleCode="emotion-style-"+this.containerCode,this.containerCode="emotion-container-"+this.containerCode,this.code="emoji-rating-"+this.containerCode,this.clicked=[],this.clicked[this.containerCode]=!1,this.init()}t.extend(h.prototype={init:function(){o=t(this.element),this.count=0,this.emotionStyle(),this.renderEmotion(),this.manageHover(),this.manageClick()},emotionStyle:function(){var t="."+this.styleCode+"{margin-right:3px;border-radius: 50%;cursor:pointer;opacity:0.3;display: inline-block;font-size:"+this.settings.emotionSize+"px; text-decoration:none;line-height:0.9;text-align: center;color:"+this.settings.color+"}";o.append("<style>"+t+"</style>")},renderEmotion:function(){for(var t=this.settings.count,i=d[this.settings.bgEmotion],e="<div class='"+this.containerCode+"'>",n=1;n<=t;n++)e+="<div class='"+this.styleCode+"' data-index='"+n+"'>"+i+"</div>";e+="</div>",o.append(e),this.settings.initialRating>0?this.initalRate(this.settings.initialRating):this.appendInput()},clearEmotion:function(i){this.settings.disabled||this.elementContainer.find("."+this.styleCode).each(function(){t(this).css("opacity",.3);var e=d[i];t(this).html(e)})},showEmotion:function(t){this.clearEmotion(this.settings.bgEmotion);for(var i=c(this.settings.emotions,t),e=0;e<t;e++)this.elementContainer.find("."+this.styleCode).eq(e).css("opacity",1),this.elementContainer.find("."+this.styleCode).eq(e).html(i)},manageHover:function(){var i=this;i.settings.disabled||this.elementContainer.on({mouseenter:function(){var e=parseInt(t(this).data("index"),10);i.clicked[i.containerCode]||i.showEmotion(e)},mouseleave:function(){i.clicked[i.containerCode]||i.clearEmotion()}},"."+this.styleCode)},manageClick:function(){var i=this;i.settings.disabled||this.elementContainer.on("click","."+this.styleCode,function(){var e=t(this).data("index"),n=parseInt(e,10);i.showEmotion(n),i.count=n,i.clicked[i.containerCode]?i.updateInput(n):(i.updateInput(n),i.clicked[i.containerCode]=!0),t.isFunction(i.settings.onUpdate)&&i.settings.onUpdate.call(i,n)})},initalRate:function(t){var i=this;i.showEmotion(t),i.clicked[i.containerCode]||(i.appendInput(t),i.clicked[i.containerCode]=!0)},appendInput:function(t){var i="";t||(i=t);var e="<input type='hidden' class='"+this.code+"' name='"+this.settings.inputName+"' value='"+i+"' />";this.elementContainer.append(e)},updateInput:function(t){this.elementContainer.find("input."+this.code).val(t)}}),t.fn[s]=function(i){return this.each(function(){t.data(this,"plugin_"+s)||t.data(this,"plugin_"+s,new h(this,i))})};var c=function(t,i){return 1==t.length?d[t[0]]:d[t[i-1]]}}(jQuery,document,window);