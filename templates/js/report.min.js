$(document).ready(function(){function j(b,c){console.log("ID: "+c+" MinValue: "+b),$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/department-by-ministry/"+b,success:function(a){$("#dropdownDepartmentAssign_"+c).empty(),$("#dropdownBranchAssign_"+c).empty(),$("#dropdownDepartmentAssign_"+c).append("<option value=null> Pilih Jabatan </option>"),$("#dropdownBranchAssign_"+c).append("<option value=null> Pilih Cawangan </option>");for(var b=0;b<a.length;b++){var d=$('<option value="'+a[b].Kod_Jab+'">'+a[b].Kod_Jab+" "+a[b].Jabatan+"</option>");$("#dropdownDepartmentAssign_"+c).append(d)}$("#dropdownDepartmentAssign_"+c).trigger("chosen:updated")},error:function(){alert("Unable to process this request...")}})}function k(b,c){console.log(b),$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/branch-by-department/"+b,success:function(a){$("#dropdownBranchAssign_"+c).empty(),$("#dropdownBranchAssign_"+c).append("<option value=null> Pilih Cawangan </option>");for(var b=0;b<a.length;b++){var d=$('<option value="'+a[b].Kod_Caw+'">'+a[b].Kod_Caw+" "+a[b].cawangan+"</option>");$("#dropdownBranchAssign_"+c).append(d)}$("#dropdownBranchAssign_"+c).trigger("chosen:updated")},error:function(){alert("Unable to process this request...")}})}function l(a,b,c,d,e){"null"==a&&"null"==b&&"null"==c?agencyId="all":"null"!=a&&"null"==b&&"null"==c?agencyId=a:"null"!=a&&"null"!=b&&"null"==c?agencyId=b:"null"!=a&&"null"!=b&&"null"!=c&&(agencyId=c);var f=agencyId+"_"+d+"_"+e;return console.log("Token: "+f),f}function m(b){$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/api/report-all/"+b,success:function(a){e.clear().draw();var b=JSON.parse(a),c=b.map(function(a){var b=[];return b.push(a.rate_id),b.push(a.date_update),b.push(a.ministry),b.push(a.department),b.push(a.branch),b.push(a.user_id),b.push(a.name),b.push(a.picked),b});e.rows.add(c),e.draw()},error:function(){alert("Unable to process this request...")}})}function n(b){$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/api/report-by-rated/"+b,success:function(a){f.clear().draw();var b=JSON.parse(a),c=b.map(function(a){var b=[];return b.push(a.agency_id),b.push(a.ministry),b.push(a.department),b.push(a.branch),b.push(a.section),b.push(a.rate_1),b.push(a.rate_2),b.push(a.rate_3),b.push(a.rate_4),b.push(a.rate_5),b.push(a.total),b});f.rows.add(c),f.draw()},error:function(){alert("Unable to process this request...")}})}function o(b){console.log("fethcing data..."+b),console.log("uri: "+a+"index.php/api/report-rated-monthly-agency-pivot/"+b),$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/api/report-rated-monthly-agency-pivot/"+b,success:function(a){g.clear().draw();var b=JSON.parse(a),c=b.map(function(a){var b=[],c="";return c=null==a.branch&&null==a.department?a.ministry:null==a.branch?a.department:a.branch,b.push(a.agency_id),b.push(c),b.push(a.Jan),b.push(a.Feb),b.push(a.Mar),b.push(a.Apr),b.push(a.May),b.push(a.Jun),b.push(a.Jul),b.push(a.Aug),b.push(a.Sep),b.push(a.Oct),b.push(a.Nov),b.push(a.Dis),b});g.rows.add(c),g.draw()},error:function(){alert("Unable to process this request...")}})}function p(b){$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/api/report-feedback/"+b,success:function(a){h.clear().draw();var b=JSON.parse(a),c=b.map(function(a){var b=[];return b.push(a.agency_id),b.push(a.ministry),b.push(a.department),b.push(a.branch),b.push(a.section),b.push(a.feedback_1),b.push(a.feedback_2),b.push(a.feedback_3),b.push(a.feedback_4),b.push(a.feedback_5),b.push(a.total),b});h.rows.add(c),h.draw()},error:function(){alert("Unable to process this request...")}})}function q(b){console.log("uri:"+a+"index.php/api/user-log/"+b),$.ajax({type:"GET",datatype:"jsonp",url:a+"index.php/api/user-log/"+b,success:function(a){i.clear().draw();var b=JSON.parse(a),c=b.map(function(a){var b=[];return b.push(a.user_id),b.push(a.agensi_id),b.push(a.nama),b.push(a.jawatan),b.push(a.session_id),b.push(a.date_login),b.push(a.date_logout),b.push(a.status),b});i.rows.add(c),i.draw()},error:function(){alert("Unable to process this request...")}})}var a=$("#domain").val();$("#base_url").val(),$("#json_data").val();m("all"),$("#dateRange").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(a,b,c){$("#dateRange_start_1").val(a.format("YYYY-MM-DD")),$("#dateRange_end_1").val(b.format("YYYY-MM-DD"))}),$("#dateRange_2").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(a,b,c){$("#dateRange_start_2").val(a.format("YYYY-MM-DD")),$("#dateRange_end_2").val(b.format("YYYY-MM-DD"))}),$("#dateRange_4").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(a,b,c){$("#dateRange_start_4").val(a.format("YYYY-MM-DD")),$("#dateRange_end_4").val(b.format("YYYY-MM-DD"))}),$("#dateRange_5").daterangepicker({locale:{format:"YYYY-MM-DD"}},function(a,b,c){$("#dateRange_start_5").val(a.format("YYYY-MM-DD")),$("#dateRange_end_5").val(b.format("YYYY-MM-DD"))});var e=$("#tblListAll").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,processing:!0,sAjaxDataProp:"",serverSide:!1,autoWidth:!0,columnDefs:[{targets:[0],visible:!1,searchable:!1}],dom:"fBlrtip",buttons:[{extend:"copyHtml5",text:'<i class="fa fa-files-o"></i>',titleAttr:"Copy"},{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i>',titleAttr:"Excel"},{extend:"csvHtml5",text:'<i class="fa fa-file-text-o"></i>',titleAttr:"CSV"},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i>',titleAttr:"PDF"},{extend:"print",text:'<i class="fa fa-print"></i>',titleAttr:"Print"}]}),f=$("#tblListByRated").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,processing:!0,sAjaxDataProp:"",serverSide:!1,autoWidth:!0,columnDefs:[{targets:[0],visible:!1,searchable:!1}],dom:"Blrtip",buttons:[{extend:"copyHtml5",text:'<i class="fa fa-files-o"></i>',titleAttr:"Copy"},{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i>',titleAttr:"Excel"},{extend:"csvHtml5",text:'<i class="fa fa-file-text-o"></i>',titleAttr:"CSV"},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i>',titleAttr:"PDF"},{extend:"print",text:'<i class="fa fa-print"></i>',titleAttr:"Print"}]}),g=$("#tblListByRatedMonthly").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,processing:!0,sAjaxDataProp:"",serverSide:!1,autoWidth:!0,dom:"Blrtip",buttons:[{extend:"copyHtml5",text:'<i class="fa fa-files-o"></i>',titleAttr:"Copy"},{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i>',titleAttr:"Excel"},{extend:"csvHtml5",text:'<i class="fa fa-file-text-o"></i>',titleAttr:"CSV"},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i>',titleAttr:"PDF"},{extend:"print",text:'<i class="fa fa-print"></i>',titleAttr:"Print"}]}),h=$("#tblListByFeedback").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,processing:!0,sAjaxDataProp:"",serverSide:!1,autoWidth:!0,columnDefs:[{targets:[0],visible:!1,searchable:!1}],dom:"Blrtip",buttons:[{extend:"copyHtml5",text:'<i class="fa fa-files-o"></i>',titleAttr:"Copy"},{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i>',titleAttr:"Excel"},{extend:"csvHtml5",text:'<i class="fa fa-file-text-o"></i>',titleAttr:"CSV"},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i>',titleAttr:"PDF"},{extend:"print",text:'<i class="fa fa-print"></i>',titleAttr:"Print"}]}),i=$("#tblListUserLog").DataTable({paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,processing:!0,sAjaxDataProp:"",serverSide:!1,autoWidth:!0,columnDefs:[{targets:[0],visible:!1,searchable:!1}],dom:"fBlrtip",buttons:[{extend:"copyHtml5",text:'<i class="fa fa-files-o"></i>',titleAttr:"Copy"},{extend:"excelHtml5",text:'<i class="fa fa-file-excel-o"></i>',titleAttr:"Excel"},{extend:"csvHtml5",text:'<i class="fa fa-file-text-o"></i>',titleAttr:"CSV"},{extend:"pdfHtml5",text:'<i class="fa fa-file-pdf-o"></i>',titleAttr:"PDF"},{extend:"print",text:'<i class="fa fa-print"></i>',titleAttr:"Print"}],initComplete:function(){this.api().columns([1,2,3]).every(function(){var a=this,b=$('<select"><option value=""></option></select>').appendTo($(a.header())).on("change",function(){var b=$.fn.dataTable.util.escapeRegex($(this).val());a.search(b?"^"+b+"$":"",!0,!1).draw()});a.data().unique().sort().each(function(a,c){b.append('<option value="'+a+'">'+a+"</option>")})})}});$("#dropdownMinistryAssign_1").change(function(){var a=$(this).val();j(a,1)}),$("#dropdownDepartmentAssign_1").change(function(){var a=$(this).val();k(a,1)}),$("#dropdownBranchAssign_1").change(function(){var a=$(this).val();console.log(a)}),$("#dropdownMinistryAssign_2").change(function(){var a=$(this).val();j(a,2)}),$("#dropdownDepartmentAssign_2").change(function(){var a=$(this).val();k(a,2)}),$("#dropdownBranchAssign_2").change(function(){var a=$(this).val();console.log(a)}),$("#dropdownMinistryAssign_3").change(function(){var a=$(this).val();j(a,3)}),$("#dropdownDepartmentAssign_3").change(function(){var a=$(this).val();k(a,3)}),$("#dropdownBranchAssign_3").change(function(){var a=$(this).val();console.log(a)}),$("#dropdownMinistryAssign_4").change(function(){var a=$(this).val();j(a,4)}),$("#dropdownDepartmentAssign_4").change(function(){var a=$(this).val();k(a,4)}),$("#dropdownBranchAssign_4").change(function(){var a=$(this).val();console.log(a)}),$("#dropdownMinistryAssign_5").change(function(){var a=$(this).val();j(a,5)}),$("#dropdownDepartmentAssign_5").change(function(){var a=$(this).val();k(a,5)}),$("#dropdownBranchAssign_5").change(function(){var a=$(this).val();console.log(a)}),$("#btnUpdateTblListAll").click(function(){var a=$("#reportType_1").val(),b=$("#dropdownMinistryAssign_"+a).val(),c=$("#dropdownDepartmentAssign_"+a).val(),d=$("#dropdownBranchAssign_"+a).val(),e=$("#dateRange_start_"+a).val(),f=$("#dateRange_end_"+a).val(),g=l(b,c,d,e,f);m(g)}),$("#btnUpdateTblListRated").click(function(){var a=$("#reportType_2").val(),b=$("#dropdownMinistryAssign_"+a).val(),c=$("#dropdownDepartmentAssign_"+a).val(),d=$("#dropdownBranchAssign_"+a).val(),e=$("#dateRange_start_"+a).val(),f=$("#dateRange_end_"+a).val(),g=l(b,c,d,e,f);n(g)}),$("#btnUpdateTblListMonthly").click(function(){var a=$("#reportType_3").val(),b=$("#dropdownMinistryAssign_"+a).val(),c=$("#dropdownDepartmentAssign_"+a).val(),d=$("#dropdownBranchAssign_"+a).val(),e=l(b,c,d,null,null);o(e)}),$("#btnUpdateTblListUserLog").click(function(){var a=$("#reportType_4").val(),b=$("#dropdownMinistryAssign_"+a).val(),c=$("#dropdownDepartmentAssign_"+a).val(),d=$("#dropdownBranchAssign_"+a).val(),e=$("#dateRange_start_"+a).val(),f=$("#dateRange_end_"+a).val(),g=l(b,c,d,e,f);q(g)}),$("#btnUpdateTblListFeedback").click(function(){var a=$("#reportType_5").val(),b=$("#dropdownMinistryAssign_"+a).val(),c=$("#dropdownDepartmentAssign_"+a).val(),d=$("#dropdownBranchAssign_"+a).val(),e=$("#dateRange_start_"+a).val(),f=$("#dateRange_end_"+a).val(),g=l(b,c,d,e,f);p(g)}),$("#btnResetListAll").click(function(){$("#dateRange_start_1").val(""),$("#dateRange_end_1").val(""),m("all")}),$("#btnResetListRated").click(function(){$("#dateRange_start_2").val(""),$("#dateRange_end_2").val(""),n("all")}),$("#btnResetListMonthly").click(function(){o("all")}),$("#btnResetListFeedback").click(function(){$("#dateRange_start_5").val(""),$("#dateRange_end_5").val(""),p("all")}),$("#btnResetListUserLog").click(function(){$("#dateRange_start_4").val(""),$("#dateRange_end_4").val(""),q("all")})});